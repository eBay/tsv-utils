Basic tests set 1
-----------------
====Whole line as key===

====[tsv-join --header --filter-file input1.tsv input2.tsv]====
f1	f2	f3	f4	f5
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102

====[tsv-join --header -f input1.tsv --key-fields 0 input2.tsv]====
f1	f2	f3	f4	f5
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102

====[tsv-join --header -f input1.tsv --key-fields 0 --data-fields 0 input2.tsv]====
f1	f2	f3	f4	f5
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102

====[tsv-join --header -f input1.tsv --exclude input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
31	 	 	sp-sp	2020b
32	xe	gk	48	49

====[tsv-join --header -f input1.tsv --append-fields 1 input2.tsv]====
f1	f2	f3	f4	f5	f1
2	bbb	ZZZ	21	28	2
9	v	vv	97	91	9
10	GGG	nnn	101	102	10

====[tsv-join --header -f input1.tsv --append-fields 1,2 input2.tsv]====
f1	f2	f3	f4	f5	f1	f2
2	bbb	ZZZ	21	28	2	bbb
9	v	vv	97	91	9	v
10	GGG	nnn	101	102	10	GGG

====[tsv-join --header -f input1.tsv --append-fields 2,1 input2.tsv]====
f1	f2	f3	f4	f5	f2	f1
2	bbb	ZZZ	21	28	bbb	2
9	v	vv	97	91	v	9
10	GGG	nnn	101	102	GGG	10

====[tsv-join --header -f input1.tsv --append-fields 2,1 --prefix i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f2	i1_f1
2	bbb	ZZZ	21	28	bbb	2
9	v	vv	97	91	v	9
10	GGG	nnn	101	102	GGG	10

====[tsv-join --filter-file input1_noheader.tsv input2_noheader.tsv]====
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102

====[tsv-join -f input1_noheader.tsv --key-fields 0 input2_noheader.tsv]====
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102

====[tsv-join -f input1_noheader.tsv --key-fields 0 --data-fields 0 input2_noheader.tsv]====
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102

====[tsv-join -f input1_noheader.tsv --exclude input2_noheader.tsv]====
1	ggg	UUU	101b	15b
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
31	 	 	sp-sp	2020b
32	xe	gk	48	49

====[tsv-join -f input1_noheader.tsv --append-fields 1 input2_noheader.tsv]====
2	bbb	ZZZ	21	28	2
9	v	vv	97	91	9
10	GGG	nnn	101	102	10

====[tsv-join -f input1_noheader.tsv --append-fields 1,2 input2_noheader.tsv]====
2	bbb	ZZZ	21	28	2	bbb
9	v	vv	97	91	9	v
10	GGG	nnn	101	102	10	GGG

====[tsv-join -f input1_noheader.tsv --append-fields 2,1 input2_noheader.tsv]====
2	bbb	ZZZ	21	28	bbb	2
9	v	vv	97	91	v	9
10	GGG	nnn	101	102	GGG	10

====Single key===

====[tsv-join --header -f input1.tsv --key-fields 1 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28

====[tsv-join --header -f input1.tsv --key-fields 2 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 3 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 2 -e input2.tsv]====
f1	f2	f3	f4	f5
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join --header -f input1.tsv -k 3 -e input2.tsv]====
f1	f2	f3	f4	f5
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join -f input1_noheader.tsv --key-fields 1 input2_noheader.tsv]====
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28

====[tsv-join -f input1_noheader.tsv --key-fields 2 input2_noheader.tsv]====
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join -f input1_noheader.tsv -k 3 input2_noheader.tsv]====
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join -f input1_noheader.tsv -k 2 -e input2_noheader.tsv]====
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join -f input1_noheader.tsv -k 3 -e input2_noheader.tsv]====
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====Single key, different data key===

====[tsv-join --header -f input1.tsv -k 2 --data-fields 2 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 1 -d 3 input2.tsv]====
f1	f2	f3	f4	f5
14	-1	1	1489b	1421b

====[tsv-join -H -f input1.tsv -k 1 -d 3 input2.tsv input2.tsv]====
f1	f2	f3	f4	f5
14	-1	1	1489b	1421b
14	-1	1	1489b	1421b

====[tsv-join --header -f input1.tsv -k 2 -d 3 input2.tsv]====
f1	f2	f3	f4	f5
3	nnn	GGG	336b	3b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
13	ÀSSC		1367b	1331b
16			1634b	1602b
24	ÀSSC		1367b	1331b
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 3 -d 2 input2.tsv]====
f1	f2	f3	f4	f5
3	nnn	GGG	336b	3b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
15		B	1522b	1567b
16			1634b	1602b
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 2 -d 3 -e input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
14	-1	1	1489b	1421b
15		B	1522b	1567b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join --header -f input1.tsv -k 3 -d 3 -e input2.tsv]====
f1	f2	f3	f4	f5
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join -f input1_noheader.tsv -k 2 --data-fields 2 input2_noheader.tsv]====
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join -f input1_noheader.tsv -k 1 -d 3 input2_noheader.tsv]====
14	-1	1	1489b	1421b

====[tsv-join -f input1_noheader.tsv -k 1 -d 3 input2_noheader.tsv input2_noheader.tsv]====
14	-1	1	1489b	1421b
14	-1	1	1489b	1421b

====[tsv-join -f input1_noheader.tsv -k 2 -d 3 input2_noheader.tsv]====
3	nnn	GGG	336b	3b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
13	ÀSSC		1367b	1331b
16			1634b	1602b
24	ÀSSC		1367b	1331b
31	 	 	sp-sp	2020b

====[tsv-join -f input1_noheader.tsv -k 3 -d 2 input2_noheader.tsv]====
3	nnn	GGG	336b	3b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
15		B	1522b	1567b
16			1634b	1602b
31	 	 	sp-sp	2020b

====[tsv-join -f input1_noheader.tsv -k 2 -d 3 -e input2_noheader.tsv]====
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
14	-1	1	1489b	1421b
15		B	1522b	1567b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join -f input1_noheader.tsv -k 3 -d 3 -e input2_noheader.tsv]====
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====Single key append variants===

====[tsv-join --header -f input1.tsv -k 2 -a 5 --allow-duplicate-keys input2.tsv]====
f1	f2	f3	f4	f5	f5
1	ggg	UUU	101b	15b	52
2	bbb	ZZZ	21	28	28
3	nnn	GGG	336b	3b	 3
4	vvv	VVV	43b	403b	403
5	ggg	CCC	5734b	52b	52
6	ddd	ZZZ	65b	602b	602
7	ßßß	SSS	7b	771b	771
8	vv	v	85b	832b	832
9	v	vv	97	91	91
10	GGG	nnn	101	102	102
11	v12	PPP	1123b	1167b	1167
12	àbc	P	1209b	1234b	1234
13	ÀSSC		1367b	1331b	1331
14	-1	1	1489b	1421b	1421
15		B	1522b	1567b	1602
16			1634b	1602b	1602
17	0	X	1721b	1703	1703
18	a g  ß	Y	1845b	1801b	1801
19	%tg-0	Z	1931b	1956b	1956
20	bbb	ZZZ	21	28	28
21	bbb	ZZZ	21	28	28
22	ddd	ZZZ	65b	602b	602
23	v12	PPP	1123b	1167b	1167
24	ÀSSC		1367b	1331b	1331
25	0	X	1721b	1703	1703
26	bbb	ZZZ	21	28	28
31	 	 	sp-sp	2020b	2020

====[tsv-join --header -f input1.tsv -k 2 -a 2 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f2
1	ggg	UUU	101b	15b	ggg
2	bbb	ZZZ	21	28	bbb
3	nnn	GGG	336b	3b	nnn
4	vvv	VVV	43b	403b	vvv
5	ggg	CCC	5734b	52b	ggg
6	ddd	ZZZ	65b	602b	ddd
7	ßßß	SSS	7b	771b	ßßß
8	vv	v	85b	832b	vv
9	v	vv	97	91	v
10	GGG	nnn	101	102	GGG
11	v12	PPP	1123b	1167b	v12
12	àbc	P	1209b	1234b	àbc
13	ÀSSC		1367b	1331b	ÀSSC
14	-1	1	1489b	1421b	-1
15		B	1522b	1567b	
16			1634b	1602b	
17	0	X	1721b	1703	0
18	a g  ß	Y	1845b	1801b	a g  ß
19	%tg-0	Z	1931b	1956b	%tg-0
20	bbb	ZZZ	21	28	bbb
21	bbb	ZZZ	21	28	bbb
22	ddd	ZZZ	65b	602b	ddd
23	v12	PPP	1123b	1167b	v12
24	ÀSSC		1367b	1331b	ÀSSC
25	0	X	1721b	1703	0
26	bbb	ZZZ	21	28	bbb
31	 	 	sp-sp	2020b	 

====[tsv-join --header -f input1.tsv -k 2 -a 3 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f3
1	ggg	UUU	101b	15b	CCC
2	bbb	ZZZ	21	28	ZZZ
3	nnn	GGG	336b	3b	GGG
4	vvv	VVV	43b	403b	VVV
5	ggg	CCC	5734b	52b	CCC
6	ddd	ZZZ	65b	602b	ZZZ
7	ßßß	SSS	7b	771b	SSS
8	vv	v	85b	832b	v
9	v	vv	97	91	vv
10	GGG	nnn	101	102	nnn
11	v12	PPP	1123b	1167b	PPP
12	àbc	P	1209b	1234b	P
13	ÀSSC		1367b	1331b	
14	-1	1	1489b	1421b	1
15		B	1522b	1567b	
16			1634b	1602b	
17	0	X	1721b	1703	X
18	a g  ß	Y	1845b	1801b	Y
19	%tg-0	Z	1931b	1956b	Z
20	bbb	ZZZ	21	28	ZZZ
21	bbb	ZZZ	21	28	ZZZ
22	ddd	ZZZ	65b	602b	ZZZ
23	v12	PPP	1123b	1167b	PPP
24	ÀSSC		1367b	1331b	
25	0	X	1721b	1703	X
26	bbb	ZZZ	21	28	ZZZ
31	 	 	sp-sp	2020b	 

====[tsv-join --header -f input1.tsv -k 2 -a 4 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f4
1	ggg	UUU	101b	15b	5734
2	bbb	ZZZ	21	28	21
3	nnn	GGG	336b	3b	336
4	vvv	VVV	43b	403b	43
5	ggg	CCC	5734b	52b	5734
6	ddd	ZZZ	65b	602b	65
7	ßßß	SSS	7b	771b	 7
8	vv	v	85b	832b	85
9	v	vv	97	91	97
10	GGG	nnn	101	102	101
11	v12	PPP	1123b	1167b	1123
12	àbc	P	1209b	1234b	1209
13	ÀSSC		1367b	1331b	1367
14	-1	1	1489b	1421b	1489
15		B	1522b	1567b	1634
16			1634b	1602b	1634
17	0	X	1721b	1703	1721
18	a g  ß	Y	1845b	1801b	1845
19	%tg-0	Z	1931b	1956b	1931
20	bbb	ZZZ	21	28	21
21	bbb	ZZZ	21	28	21
22	ddd	ZZZ	65b	602b	65
23	v12	PPP	1123b	1167b	1123
24	ÀSSC		1367b	1331b	1367
25	0	X	1721b	1703	1721
26	bbb	ZZZ	21	28	21
31	 	 	sp-sp	2020b	sp-sp

====[tsv-join --header -f input1.tsv -k 2 -a 5 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f5
1	ggg	UUU	101b	15b	52
2	bbb	ZZZ	21	28	28
3	nnn	GGG	336b	3b	 3
4	vvv	VVV	43b	403b	403
5	ggg	CCC	5734b	52b	52
6	ddd	ZZZ	65b	602b	602
7	ßßß	SSS	7b	771b	771
8	vv	v	85b	832b	832
9	v	vv	97	91	91
10	GGG	nnn	101	102	102
11	v12	PPP	1123b	1167b	1167
12	àbc	P	1209b	1234b	1234
13	ÀSSC		1367b	1331b	1331
14	-1	1	1489b	1421b	1421
15		B	1522b	1567b	1602
16			1634b	1602b	1602
17	0	X	1721b	1703	1703
18	a g  ß	Y	1845b	1801b	1801
19	%tg-0	Z	1931b	1956b	1956
20	bbb	ZZZ	21	28	28
21	bbb	ZZZ	21	28	28
22	ddd	ZZZ	65b	602b	602
23	v12	PPP	1123b	1167b	1167
24	ÀSSC		1367b	1331b	1331
25	0	X	1721b	1703	1703
26	bbb	ZZZ	21	28	28
31	 	 	sp-sp	2020b	2020

====[tsv-join --header -f input1.tsv -k 2 -d 3 -a 4 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f4
3	nnn	GGG	336b	3b	101
8	vv	v	85b	832b	97
9	v	vv	97	91	85
10	GGG	nnn	101	102	336
13	ÀSSC		1367b	1331b	1634
16			1634b	1602b	1634
24	ÀSSC		1367b	1331b	1634
31	 	 	sp-sp	2020b	sp-sp

====[tsv-join --header -f input1.tsv -k 2 -a 2,3 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f2	i1_f3
1	ggg	UUU	101b	15b	ggg	CCC
2	bbb	ZZZ	21	28	bbb	ZZZ
3	nnn	GGG	336b	3b	nnn	GGG
4	vvv	VVV	43b	403b	vvv	VVV
5	ggg	CCC	5734b	52b	ggg	CCC
6	ddd	ZZZ	65b	602b	ddd	ZZZ
7	ßßß	SSS	7b	771b	ßßß	SSS
8	vv	v	85b	832b	vv	v
9	v	vv	97	91	v	vv
10	GGG	nnn	101	102	GGG	nnn
11	v12	PPP	1123b	1167b	v12	PPP
12	àbc	P	1209b	1234b	àbc	P
13	ÀSSC		1367b	1331b	ÀSSC	
14	-1	1	1489b	1421b	-1	1
15		B	1522b	1567b		
16			1634b	1602b		
17	0	X	1721b	1703	0	X
18	a g  ß	Y	1845b	1801b	a g  ß	Y
19	%tg-0	Z	1931b	1956b	%tg-0	Z
20	bbb	ZZZ	21	28	bbb	ZZZ
21	bbb	ZZZ	21	28	bbb	ZZZ
22	ddd	ZZZ	65b	602b	ddd	ZZZ
23	v12	PPP	1123b	1167b	v12	PPP
24	ÀSSC		1367b	1331b	ÀSSC	
25	0	X	1721b	1703	0	X
26	bbb	ZZZ	21	28	bbb	ZZZ
31	 	 	sp-sp	2020b	 	 

====[tsv-join --header -f input1.tsv -k 2 -a 3,2 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f3	i1_f2
1	ggg	UUU	101b	15b	CCC	ggg
2	bbb	ZZZ	21	28	ZZZ	bbb
3	nnn	GGG	336b	3b	GGG	nnn
4	vvv	VVV	43b	403b	VVV	vvv
5	ggg	CCC	5734b	52b	CCC	ggg
6	ddd	ZZZ	65b	602b	ZZZ	ddd
7	ßßß	SSS	7b	771b	SSS	ßßß
8	vv	v	85b	832b	v	vv
9	v	vv	97	91	vv	v
10	GGG	nnn	101	102	nnn	GGG
11	v12	PPP	1123b	1167b	PPP	v12
12	àbc	P	1209b	1234b	P	àbc
13	ÀSSC		1367b	1331b		ÀSSC
14	-1	1	1489b	1421b	1	-1
15		B	1522b	1567b		
16			1634b	1602b		
17	0	X	1721b	1703	X	0
18	a g  ß	Y	1845b	1801b	Y	a g  ß
19	%tg-0	Z	1931b	1956b	Z	%tg-0
20	bbb	ZZZ	21	28	ZZZ	bbb
21	bbb	ZZZ	21	28	ZZZ	bbb
22	ddd	ZZZ	65b	602b	ZZZ	ddd
23	v12	PPP	1123b	1167b	PPP	v12
24	ÀSSC		1367b	1331b		ÀSSC
25	0	X	1721b	1703	X	0
26	bbb	ZZZ	21	28	ZZZ	bbb
31	 	 	sp-sp	2020b	 	 

====[tsv-join --header -f input1.tsv -k 2 -a 3,2,4 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f3	i1_f2	i1_f4
1	ggg	UUU	101b	15b	CCC	ggg	5734
2	bbb	ZZZ	21	28	ZZZ	bbb	21
3	nnn	GGG	336b	3b	GGG	nnn	336
4	vvv	VVV	43b	403b	VVV	vvv	43
5	ggg	CCC	5734b	52b	CCC	ggg	5734
6	ddd	ZZZ	65b	602b	ZZZ	ddd	65
7	ßßß	SSS	7b	771b	SSS	ßßß	 7
8	vv	v	85b	832b	v	vv	85
9	v	vv	97	91	vv	v	97
10	GGG	nnn	101	102	nnn	GGG	101
11	v12	PPP	1123b	1167b	PPP	v12	1123
12	àbc	P	1209b	1234b	P	àbc	1209
13	ÀSSC		1367b	1331b		ÀSSC	1367
14	-1	1	1489b	1421b	1	-1	1489
15		B	1522b	1567b			1634
16			1634b	1602b			1634
17	0	X	1721b	1703	X	0	1721
18	a g  ß	Y	1845b	1801b	Y	a g  ß	1845
19	%tg-0	Z	1931b	1956b	Z	%tg-0	1931
20	bbb	ZZZ	21	28	ZZZ	bbb	21
21	bbb	ZZZ	21	28	ZZZ	bbb	21
22	ddd	ZZZ	65b	602b	ZZZ	ddd	65
23	v12	PPP	1123b	1167b	PPP	v12	1123
24	ÀSSC		1367b	1331b		ÀSSC	1367
25	0	X	1721b	1703	X	0	1721
26	bbb	ZZZ	21	28	ZZZ	bbb	21
31	 	 	sp-sp	2020b	 	 	sp-sp

====[tsv-join --header -f input1.tsv -k 2 -a 3-2,4 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f3	i1_f2	i1_f4
1	ggg	UUU	101b	15b	CCC	ggg	5734
2	bbb	ZZZ	21	28	ZZZ	bbb	21
3	nnn	GGG	336b	3b	GGG	nnn	336
4	vvv	VVV	43b	403b	VVV	vvv	43
5	ggg	CCC	5734b	52b	CCC	ggg	5734
6	ddd	ZZZ	65b	602b	ZZZ	ddd	65
7	ßßß	SSS	7b	771b	SSS	ßßß	 7
8	vv	v	85b	832b	v	vv	85
9	v	vv	97	91	vv	v	97
10	GGG	nnn	101	102	nnn	GGG	101
11	v12	PPP	1123b	1167b	PPP	v12	1123
12	àbc	P	1209b	1234b	P	àbc	1209
13	ÀSSC		1367b	1331b		ÀSSC	1367
14	-1	1	1489b	1421b	1	-1	1489
15		B	1522b	1567b			1634
16			1634b	1602b			1634
17	0	X	1721b	1703	X	0	1721
18	a g  ß	Y	1845b	1801b	Y	a g  ß	1845
19	%tg-0	Z	1931b	1956b	Z	%tg-0	1931
20	bbb	ZZZ	21	28	ZZZ	bbb	21
21	bbb	ZZZ	21	28	ZZZ	bbb	21
22	ddd	ZZZ	65b	602b	ZZZ	ddd	65
23	v12	PPP	1123b	1167b	PPP	v12	1123
24	ÀSSC		1367b	1331b		ÀSSC	1367
25	0	X	1721b	1703	X	0	1721
26	bbb	ZZZ	21	28	ZZZ	bbb	21
31	 	 	sp-sp	2020b	 	 	sp-sp

====[tsv-join --header -f input1.tsv -k 2 -a 1,2,3,4,5 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f1	i1_f2	i1_f3	i1_f4	i1_f5
1	ggg	UUU	101b	15b	5	ggg	CCC	5734	52
2	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b	3	nnn	GGG	336	 3
4	vvv	VVV	43b	403b	4	vvv	VVV	43	403
5	ggg	CCC	5734b	52b	5	ggg	CCC	5734	52
6	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
7	ßßß	SSS	7b	771b	7	ßßß	SSS	 7	771
8	vv	v	85b	832b	8	vv	v	85	832
9	v	vv	97	91	9	v	vv	97	91
10	GGG	nnn	101	102	10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
12	àbc	P	1209b	1234b	12	àbc	P	1209	1234
13	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
14	-1	1	1489b	1421b	14	-1	1	1489	1421
15		B	1522b	1567b	16			1634	1602
16			1634b	1602b	16			1634	1602
17	0	X	1721b	1703	17	0	X	1721	1703
18	a g  ß	Y	1845b	1801b	18	a g  ß	Y	1845	1801
19	%tg-0	Z	1931b	1956b	19	%tg-0	Z	1931	1956
20	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
23	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
24	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
25	0	X	1721b	1703	17	0	X	1721	1703
26	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b	20	 	 	sp-sp	2020

====[tsv-join --header -f input1.tsv -k 2 -a 1-5 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f1	i1_f2	i1_f3	i1_f4	i1_f5
1	ggg	UUU	101b	15b	5	ggg	CCC	5734	52
2	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b	3	nnn	GGG	336	 3
4	vvv	VVV	43b	403b	4	vvv	VVV	43	403
5	ggg	CCC	5734b	52b	5	ggg	CCC	5734	52
6	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
7	ßßß	SSS	7b	771b	7	ßßß	SSS	 7	771
8	vv	v	85b	832b	8	vv	v	85	832
9	v	vv	97	91	9	v	vv	97	91
10	GGG	nnn	101	102	10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
12	àbc	P	1209b	1234b	12	àbc	P	1209	1234
13	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
14	-1	1	1489b	1421b	14	-1	1	1489	1421
15		B	1522b	1567b	16			1634	1602
16			1634b	1602b	16			1634	1602
17	0	X	1721b	1703	17	0	X	1721	1703
18	a g  ß	Y	1845b	1801b	18	a g  ß	Y	1845	1801
19	%tg-0	Z	1931b	1956b	19	%tg-0	Z	1931	1956
20	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
23	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
24	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
25	0	X	1721b	1703	17	0	X	1721	1703
26	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b	20	 	 	sp-sp	2020

====[tsv-join --header -f input1.tsv -k 2 -a 5,4,3,2,1 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f5	i1_f4	i1_f3	i1_f2	i1_f1
1	ggg	UUU	101b	15b	52	5734	CCC	ggg	5
2	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
3	nnn	GGG	336b	3b	 3	336	GGG	nnn	3
4	vvv	VVV	43b	403b	403	43	VVV	vvv	4
5	ggg	CCC	5734b	52b	52	5734	CCC	ggg	5
6	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
7	ßßß	SSS	7b	771b	771	 7	SSS	ßßß	7
8	vv	v	85b	832b	832	85	v	vv	8
9	v	vv	97	91	91	97	vv	v	9
10	GGG	nnn	101	102	102	101	nnn	GGG	10
11	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
12	àbc	P	1209b	1234b	1234	1209	P	àbc	12
13	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
14	-1	1	1489b	1421b	1421	1489	1	-1	14
15		B	1522b	1567b	1602	1634			16
16			1634b	1602b	1602	1634			16
17	0	X	1721b	1703	1703	1721	X	0	17
18	a g  ß	Y	1845b	1801b	1801	1845	Y	a g  ß	18
19	%tg-0	Z	1931b	1956b	1956	1931	Z	%tg-0	19
20	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
21	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
22	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
23	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
24	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
25	0	X	1721b	1703	1703	1721	X	0	17
26	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
31	 	 	sp-sp	2020b	2020	sp-sp	 	 	20

====[tsv-join --header -f input1.tsv -k 2 -a 5-1 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f5	i1_f4	i1_f3	i1_f2	i1_f1
1	ggg	UUU	101b	15b	52	5734	CCC	ggg	5
2	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
3	nnn	GGG	336b	3b	 3	336	GGG	nnn	3
4	vvv	VVV	43b	403b	403	43	VVV	vvv	4
5	ggg	CCC	5734b	52b	52	5734	CCC	ggg	5
6	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
7	ßßß	SSS	7b	771b	771	 7	SSS	ßßß	7
8	vv	v	85b	832b	832	85	v	vv	8
9	v	vv	97	91	91	97	vv	v	9
10	GGG	nnn	101	102	102	101	nnn	GGG	10
11	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
12	àbc	P	1209b	1234b	1234	1209	P	àbc	12
13	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
14	-1	1	1489b	1421b	1421	1489	1	-1	14
15		B	1522b	1567b	1602	1634			16
16			1634b	1602b	1602	1634			16
17	0	X	1721b	1703	1703	1721	X	0	17
18	a g  ß	Y	1845b	1801b	1801	1845	Y	a g  ß	18
19	%tg-0	Z	1931b	1956b	1956	1931	Z	%tg-0	19
20	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
21	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
22	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
23	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
24	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
25	0	X	1721b	1703	1703	1721	X	0	17
26	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
31	 	 	sp-sp	2020b	2020	sp-sp	 	 	20

====[tsv-join -f input1_noheader.tsv -k 2 -a 5 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	52
2	bbb	ZZZ	21	28	28
3	nnn	GGG	336b	3b	 3
4	vvv	VVV	43b	403b	403
5	ggg	CCC	5734b	52b	52
6	ddd	ZZZ	65b	602b	602
7	ßßß	SSS	7b	771b	771
8	vv	v	85b	832b	832
9	v	vv	97	91	91
10	GGG	nnn	101	102	102
11	v12	PPP	1123b	1167b	1167
12	àbc	P	1209b	1234b	1234
13	ÀSSC		1367b	1331b	1331
14	-1	1	1489b	1421b	1421
15		B	1522b	1567b	1602
16			1634b	1602b	1602
17	0	X	1721b	1703	1703
18	a g  ß	Y	1845b	1801b	1801
19	%tg-0	Z	1931b	1956b	1956
20	bbb	ZZZ	21	28	28
21	bbb	ZZZ	21	28	28
22	ddd	ZZZ	65b	602b	602
23	v12	PPP	1123b	1167b	1167
24	ÀSSC		1367b	1331b	1331
25	0	X	1721b	1703	1703
26	bbb	ZZZ	21	28	28
31	 	 	sp-sp	2020b	2020

====[tsv-join -f input1_noheader.tsv -k 2 -a 2 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	ggg
2	bbb	ZZZ	21	28	bbb
3	nnn	GGG	336b	3b	nnn
4	vvv	VVV	43b	403b	vvv
5	ggg	CCC	5734b	52b	ggg
6	ddd	ZZZ	65b	602b	ddd
7	ßßß	SSS	7b	771b	ßßß
8	vv	v	85b	832b	vv
9	v	vv	97	91	v
10	GGG	nnn	101	102	GGG
11	v12	PPP	1123b	1167b	v12
12	àbc	P	1209b	1234b	àbc
13	ÀSSC		1367b	1331b	ÀSSC
14	-1	1	1489b	1421b	-1
15		B	1522b	1567b	
16			1634b	1602b	
17	0	X	1721b	1703	0
18	a g  ß	Y	1845b	1801b	a g  ß
19	%tg-0	Z	1931b	1956b	%tg-0
20	bbb	ZZZ	21	28	bbb
21	bbb	ZZZ	21	28	bbb
22	ddd	ZZZ	65b	602b	ddd
23	v12	PPP	1123b	1167b	v12
24	ÀSSC		1367b	1331b	ÀSSC
25	0	X	1721b	1703	0
26	bbb	ZZZ	21	28	bbb
31	 	 	sp-sp	2020b	 

====[tsv-join -f input1_noheader.tsv -k 2 -a 3 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	CCC
2	bbb	ZZZ	21	28	ZZZ
3	nnn	GGG	336b	3b	GGG
4	vvv	VVV	43b	403b	VVV
5	ggg	CCC	5734b	52b	CCC
6	ddd	ZZZ	65b	602b	ZZZ
7	ßßß	SSS	7b	771b	SSS
8	vv	v	85b	832b	v
9	v	vv	97	91	vv
10	GGG	nnn	101	102	nnn
11	v12	PPP	1123b	1167b	PPP
12	àbc	P	1209b	1234b	P
13	ÀSSC		1367b	1331b	
14	-1	1	1489b	1421b	1
15		B	1522b	1567b	
16			1634b	1602b	
17	0	X	1721b	1703	X
18	a g  ß	Y	1845b	1801b	Y
19	%tg-0	Z	1931b	1956b	Z
20	bbb	ZZZ	21	28	ZZZ
21	bbb	ZZZ	21	28	ZZZ
22	ddd	ZZZ	65b	602b	ZZZ
23	v12	PPP	1123b	1167b	PPP
24	ÀSSC		1367b	1331b	
25	0	X	1721b	1703	X
26	bbb	ZZZ	21	28	ZZZ
31	 	 	sp-sp	2020b	 

====[tsv-join -f input1_noheader.tsv -k 2 -a 4 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	5734
2	bbb	ZZZ	21	28	21
3	nnn	GGG	336b	3b	336
4	vvv	VVV	43b	403b	43
5	ggg	CCC	5734b	52b	5734
6	ddd	ZZZ	65b	602b	65
7	ßßß	SSS	7b	771b	 7
8	vv	v	85b	832b	85
9	v	vv	97	91	97
10	GGG	nnn	101	102	101
11	v12	PPP	1123b	1167b	1123
12	àbc	P	1209b	1234b	1209
13	ÀSSC		1367b	1331b	1367
14	-1	1	1489b	1421b	1489
15		B	1522b	1567b	1634
16			1634b	1602b	1634
17	0	X	1721b	1703	1721
18	a g  ß	Y	1845b	1801b	1845
19	%tg-0	Z	1931b	1956b	1931
20	bbb	ZZZ	21	28	21
21	bbb	ZZZ	21	28	21
22	ddd	ZZZ	65b	602b	65
23	v12	PPP	1123b	1167b	1123
24	ÀSSC		1367b	1331b	1367
25	0	X	1721b	1703	1721
26	bbb	ZZZ	21	28	21
31	 	 	sp-sp	2020b	sp-sp

====[tsv-join -f input1_noheader.tsv -k 2 -a 5 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	52
2	bbb	ZZZ	21	28	28
3	nnn	GGG	336b	3b	 3
4	vvv	VVV	43b	403b	403
5	ggg	CCC	5734b	52b	52
6	ddd	ZZZ	65b	602b	602
7	ßßß	SSS	7b	771b	771
8	vv	v	85b	832b	832
9	v	vv	97	91	91
10	GGG	nnn	101	102	102
11	v12	PPP	1123b	1167b	1167
12	àbc	P	1209b	1234b	1234
13	ÀSSC		1367b	1331b	1331
14	-1	1	1489b	1421b	1421
15		B	1522b	1567b	1602
16			1634b	1602b	1602
17	0	X	1721b	1703	1703
18	a g  ß	Y	1845b	1801b	1801
19	%tg-0	Z	1931b	1956b	1956
20	bbb	ZZZ	21	28	28
21	bbb	ZZZ	21	28	28
22	ddd	ZZZ	65b	602b	602
23	v12	PPP	1123b	1167b	1167
24	ÀSSC		1367b	1331b	1331
25	0	X	1721b	1703	1703
26	bbb	ZZZ	21	28	28
31	 	 	sp-sp	2020b	2020

====[tsv-join -f input1_noheader.tsv -k 2 -d 3 -a 4 --allow-duplicate-keys input2_noheader.tsv]====
3	nnn	GGG	336b	3b	101
8	vv	v	85b	832b	97
9	v	vv	97	91	85
10	GGG	nnn	101	102	336
13	ÀSSC		1367b	1331b	1634
16			1634b	1602b	1634
24	ÀSSC		1367b	1331b	1634
31	 	 	sp-sp	2020b	sp-sp

====[tsv-join -f input1_noheader.tsv -k 2 -a 2,3 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	ggg	CCC
2	bbb	ZZZ	21	28	bbb	ZZZ
3	nnn	GGG	336b	3b	nnn	GGG
4	vvv	VVV	43b	403b	vvv	VVV
5	ggg	CCC	5734b	52b	ggg	CCC
6	ddd	ZZZ	65b	602b	ddd	ZZZ
7	ßßß	SSS	7b	771b	ßßß	SSS
8	vv	v	85b	832b	vv	v
9	v	vv	97	91	v	vv
10	GGG	nnn	101	102	GGG	nnn
11	v12	PPP	1123b	1167b	v12	PPP
12	àbc	P	1209b	1234b	àbc	P
13	ÀSSC		1367b	1331b	ÀSSC	
14	-1	1	1489b	1421b	-1	1
15		B	1522b	1567b		
16			1634b	1602b		
17	0	X	1721b	1703	0	X
18	a g  ß	Y	1845b	1801b	a g  ß	Y
19	%tg-0	Z	1931b	1956b	%tg-0	Z
20	bbb	ZZZ	21	28	bbb	ZZZ
21	bbb	ZZZ	21	28	bbb	ZZZ
22	ddd	ZZZ	65b	602b	ddd	ZZZ
23	v12	PPP	1123b	1167b	v12	PPP
24	ÀSSC		1367b	1331b	ÀSSC	
25	0	X	1721b	1703	0	X
26	bbb	ZZZ	21	28	bbb	ZZZ
31	 	 	sp-sp	2020b	 	 

====[tsv-join -f input1_noheader.tsv -k 2 -a 3,2 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	CCC	ggg
2	bbb	ZZZ	21	28	ZZZ	bbb
3	nnn	GGG	336b	3b	GGG	nnn
4	vvv	VVV	43b	403b	VVV	vvv
5	ggg	CCC	5734b	52b	CCC	ggg
6	ddd	ZZZ	65b	602b	ZZZ	ddd
7	ßßß	SSS	7b	771b	SSS	ßßß
8	vv	v	85b	832b	v	vv
9	v	vv	97	91	vv	v
10	GGG	nnn	101	102	nnn	GGG
11	v12	PPP	1123b	1167b	PPP	v12
12	àbc	P	1209b	1234b	P	àbc
13	ÀSSC		1367b	1331b		ÀSSC
14	-1	1	1489b	1421b	1	-1
15		B	1522b	1567b		
16			1634b	1602b		
17	0	X	1721b	1703	X	0
18	a g  ß	Y	1845b	1801b	Y	a g  ß
19	%tg-0	Z	1931b	1956b	Z	%tg-0
20	bbb	ZZZ	21	28	ZZZ	bbb
21	bbb	ZZZ	21	28	ZZZ	bbb
22	ddd	ZZZ	65b	602b	ZZZ	ddd
23	v12	PPP	1123b	1167b	PPP	v12
24	ÀSSC		1367b	1331b		ÀSSC
25	0	X	1721b	1703	X	0
26	bbb	ZZZ	21	28	ZZZ	bbb
31	 	 	sp-sp	2020b	 	 

====[tsv-join -f input1_noheader.tsv -k 2 -a 3,2,4 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	CCC	ggg	5734
2	bbb	ZZZ	21	28	ZZZ	bbb	21
3	nnn	GGG	336b	3b	GGG	nnn	336
4	vvv	VVV	43b	403b	VVV	vvv	43
5	ggg	CCC	5734b	52b	CCC	ggg	5734
6	ddd	ZZZ	65b	602b	ZZZ	ddd	65
7	ßßß	SSS	7b	771b	SSS	ßßß	 7
8	vv	v	85b	832b	v	vv	85
9	v	vv	97	91	vv	v	97
10	GGG	nnn	101	102	nnn	GGG	101
11	v12	PPP	1123b	1167b	PPP	v12	1123
12	àbc	P	1209b	1234b	P	àbc	1209
13	ÀSSC		1367b	1331b		ÀSSC	1367
14	-1	1	1489b	1421b	1	-1	1489
15		B	1522b	1567b			1634
16			1634b	1602b			1634
17	0	X	1721b	1703	X	0	1721
18	a g  ß	Y	1845b	1801b	Y	a g  ß	1845
19	%tg-0	Z	1931b	1956b	Z	%tg-0	1931
20	bbb	ZZZ	21	28	ZZZ	bbb	21
21	bbb	ZZZ	21	28	ZZZ	bbb	21
22	ddd	ZZZ	65b	602b	ZZZ	ddd	65
23	v12	PPP	1123b	1167b	PPP	v12	1123
24	ÀSSC		1367b	1331b		ÀSSC	1367
25	0	X	1721b	1703	X	0	1721
26	bbb	ZZZ	21	28	ZZZ	bbb	21
31	 	 	sp-sp	2020b	 	 	sp-sp

====[tsv-join -f input1_noheader.tsv -k 2 -a 3-2,4 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	CCC	ggg	5734
2	bbb	ZZZ	21	28	ZZZ	bbb	21
3	nnn	GGG	336b	3b	GGG	nnn	336
4	vvv	VVV	43b	403b	VVV	vvv	43
5	ggg	CCC	5734b	52b	CCC	ggg	5734
6	ddd	ZZZ	65b	602b	ZZZ	ddd	65
7	ßßß	SSS	7b	771b	SSS	ßßß	 7
8	vv	v	85b	832b	v	vv	85
9	v	vv	97	91	vv	v	97
10	GGG	nnn	101	102	nnn	GGG	101
11	v12	PPP	1123b	1167b	PPP	v12	1123
12	àbc	P	1209b	1234b	P	àbc	1209
13	ÀSSC		1367b	1331b		ÀSSC	1367
14	-1	1	1489b	1421b	1	-1	1489
15		B	1522b	1567b			1634
16			1634b	1602b			1634
17	0	X	1721b	1703	X	0	1721
18	a g  ß	Y	1845b	1801b	Y	a g  ß	1845
19	%tg-0	Z	1931b	1956b	Z	%tg-0	1931
20	bbb	ZZZ	21	28	ZZZ	bbb	21
21	bbb	ZZZ	21	28	ZZZ	bbb	21
22	ddd	ZZZ	65b	602b	ZZZ	ddd	65
23	v12	PPP	1123b	1167b	PPP	v12	1123
24	ÀSSC		1367b	1331b		ÀSSC	1367
25	0	X	1721b	1703	X	0	1721
26	bbb	ZZZ	21	28	ZZZ	bbb	21
31	 	 	sp-sp	2020b	 	 	sp-sp

====[tsv-join -f input1_noheader.tsv -k 2 -a 1,2,3,4,5 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	5	ggg	CCC	5734	52
2	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b	3	nnn	GGG	336	 3
4	vvv	VVV	43b	403b	4	vvv	VVV	43	403
5	ggg	CCC	5734b	52b	5	ggg	CCC	5734	52
6	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
7	ßßß	SSS	7b	771b	7	ßßß	SSS	 7	771
8	vv	v	85b	832b	8	vv	v	85	832
9	v	vv	97	91	9	v	vv	97	91
10	GGG	nnn	101	102	10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
12	àbc	P	1209b	1234b	12	àbc	P	1209	1234
13	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
14	-1	1	1489b	1421b	14	-1	1	1489	1421
15		B	1522b	1567b	16			1634	1602
16			1634b	1602b	16			1634	1602
17	0	X	1721b	1703	17	0	X	1721	1703
18	a g  ß	Y	1845b	1801b	18	a g  ß	Y	1845	1801
19	%tg-0	Z	1931b	1956b	19	%tg-0	Z	1931	1956
20	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
23	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
24	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
25	0	X	1721b	1703	17	0	X	1721	1703
26	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b	20	 	 	sp-sp	2020

====[tsv-join -f input1_noheader.tsv -k 2 -a 1-5 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	5	ggg	CCC	5734	52
2	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b	3	nnn	GGG	336	 3
4	vvv	VVV	43b	403b	4	vvv	VVV	43	403
5	ggg	CCC	5734b	52b	5	ggg	CCC	5734	52
6	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
7	ßßß	SSS	7b	771b	7	ßßß	SSS	 7	771
8	vv	v	85b	832b	8	vv	v	85	832
9	v	vv	97	91	9	v	vv	97	91
10	GGG	nnn	101	102	10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
12	àbc	P	1209b	1234b	12	àbc	P	1209	1234
13	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
14	-1	1	1489b	1421b	14	-1	1	1489	1421
15		B	1522b	1567b	16			1634	1602
16			1634b	1602b	16			1634	1602
17	0	X	1721b	1703	17	0	X	1721	1703
18	a g  ß	Y	1845b	1801b	18	a g  ß	Y	1845	1801
19	%tg-0	Z	1931b	1956b	19	%tg-0	Z	1931	1956
20	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b	6	ddd	ZZZ	65	602
23	v12	PPP	1123b	1167b	11	v12	PPP	1123	1167
24	ÀSSC		1367b	1331b	13	ÀSSC		1367	1331
25	0	X	1721b	1703	17	0	X	1721	1703
26	bbb	ZZZ	21	28	2	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b	20	 	 	sp-sp	2020

====[tsv-join -f input1_noheader.tsv -k 2 -a 5,4,3,2,1 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	52	5734	CCC	ggg	5
2	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
3	nnn	GGG	336b	3b	 3	336	GGG	nnn	3
4	vvv	VVV	43b	403b	403	43	VVV	vvv	4
5	ggg	CCC	5734b	52b	52	5734	CCC	ggg	5
6	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
7	ßßß	SSS	7b	771b	771	 7	SSS	ßßß	7
8	vv	v	85b	832b	832	85	v	vv	8
9	v	vv	97	91	91	97	vv	v	9
10	GGG	nnn	101	102	102	101	nnn	GGG	10
11	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
12	àbc	P	1209b	1234b	1234	1209	P	àbc	12
13	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
14	-1	1	1489b	1421b	1421	1489	1	-1	14
15		B	1522b	1567b	1602	1634			16
16			1634b	1602b	1602	1634			16
17	0	X	1721b	1703	1703	1721	X	0	17
18	a g  ß	Y	1845b	1801b	1801	1845	Y	a g  ß	18
19	%tg-0	Z	1931b	1956b	1956	1931	Z	%tg-0	19
20	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
21	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
22	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
23	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
24	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
25	0	X	1721b	1703	1703	1721	X	0	17
26	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
31	 	 	sp-sp	2020b	2020	sp-sp	 	 	20

====[tsv-join -f input1_noheader.tsv -k 2 -a 5-1 --allow-duplicate-keys input2_noheader.tsv]====
1	ggg	UUU	101b	15b	52	5734	CCC	ggg	5
2	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
3	nnn	GGG	336b	3b	 3	336	GGG	nnn	3
4	vvv	VVV	43b	403b	403	43	VVV	vvv	4
5	ggg	CCC	5734b	52b	52	5734	CCC	ggg	5
6	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
7	ßßß	SSS	7b	771b	771	 7	SSS	ßßß	7
8	vv	v	85b	832b	832	85	v	vv	8
9	v	vv	97	91	91	97	vv	v	9
10	GGG	nnn	101	102	102	101	nnn	GGG	10
11	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
12	àbc	P	1209b	1234b	1234	1209	P	àbc	12
13	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
14	-1	1	1489b	1421b	1421	1489	1	-1	14
15		B	1522b	1567b	1602	1634			16
16			1634b	1602b	1602	1634			16
17	0	X	1721b	1703	1703	1721	X	0	17
18	a g  ß	Y	1845b	1801b	1801	1845	Y	a g  ß	18
19	%tg-0	Z	1931b	1956b	1956	1931	Z	%tg-0	19
20	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
21	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
22	ddd	ZZZ	65b	602b	602	65	ZZZ	ddd	6
23	v12	PPP	1123b	1167b	1167	1123	PPP	v12	11
24	ÀSSC		1367b	1331b	1331	1367		ÀSSC	13
25	0	X	1721b	1703	1703	1721	X	0	17
26	bbb	ZZZ	21	28	28	21	ZZZ	bbb	2
31	 	 	sp-sp	2020b	2020	sp-sp	 	 	20

====Whole line appends===

====[tsv-join --header -f input1.tsv -k 3 -d 2 -a 0 --allow-duplicate-keys input2.tsv]====
f1	f2	f3	f4	f5	f1	f2	f3	f4	f5
3	nnn	GGG	336b	3b	10	GGG	nnn	101	102
8	vv	v	85b	832b	9	v	vv	97	91
9	v	vv	97	91	8	vv	v	85	832
10	GGG	nnn	101	102	3	nnn	GGG	336	 3
15		B	1522b	1567b	16			1634	1602
16			1634b	1602b	16			1634	1602
31	 	 	sp-sp	2020b	20	 	 	sp-sp	2020

====[tsv-join --header -f input1.tsv -k 3 -d 2 -a 0 --allow-duplicate-keys -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f1	i1_f2	i1_f3	i1_f4	i1_f5
3	nnn	GGG	336b	3b	10	GGG	nnn	101	102
8	vv	v	85b	832b	9	v	vv	97	91
9	v	vv	97	91	8	vv	v	85	832
10	GGG	nnn	101	102	3	nnn	GGG	336	 3
15		B	1522b	1567b	16			1634	1602
16			1634b	1602b	16			1634	1602
31	 	 	sp-sp	2020b	20	 	 	sp-sp	2020

====Multi-field keys===

====[tsv-join --header -f input1.tsv -k 2,3 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 3,2 -d 3,2 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 3-2 -d 3-2 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 3,2 input2.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101b	15b
2	bbb	ZZZ	21	28
3	nnn	GGG	336b	3b
4	vvv	VVV	43b	403b
5	ggg	CCC	5734b	52b
6	ddd	ZZZ	65b	602b
7	ßßß	SSS	7b	771b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
11	v12	PPP	1123b	1167b
12	àbc	P	1209b	1234b
13	ÀSSC		1367b	1331b
14	-1	1	1489b	1421b
15		B	1522b	1567b
16			1634b	1602b
17	0	X	1721b	1703
18	a g  ß	Y	1845b	1801b
19	%tg-0	Z	1931b	1956b
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
22	ddd	ZZZ	65b	602b
23	v12	PPP	1123b	1167b
24	ÀSSC		1367b	1331b
25	0	X	1721b	1703
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 2,3 -d 3,2 input2.tsv]====
f1	f2	f3	f4	f5
3	nnn	GGG	336b	3b
8	vv	v	85b	832b
9	v	vv	97	91
10	GGG	nnn	101	102
16			1634b	1602b
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 2,3,4 input2.tsv]====
f1	f2	f3	f4	f5
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
26	bbb	ZZZ	21	28
31	 	 	sp-sp	2020b

====[tsv-join --header -f input1.tsv -k 5,2,3 input2.tsv]====
f1	f2	f3	f4	f5
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102
17	0	X	1721b	1703
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
25	0	X	1721b	1703
26	bbb	ZZZ	21	28

====[tsv-join --header -f input1.tsv -k 5,2-3 input2.tsv]====
f1	f2	f3	f4	f5
2	bbb	ZZZ	21	28
9	v	vv	97	91
10	GGG	nnn	101	102
17	0	X	1721b	1703
20	bbb	ZZZ	21	28
21	bbb	ZZZ	21	28
25	0	X	1721b	1703
26	bbb	ZZZ	21	28

====[tsv-join --header -f input1.tsv -k 2,3 -e input2.tsv]====
f1	f2	f3	f4	f5
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join --header -f input1.tsv -k 3,2 -e input2.tsv]====
f1	f2	f3	f4	f5
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join --header -f input1.tsv -k 3,2 -d 3,2 -e input2.tsv]====
f1	f2	f3	f4	f5
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join --header -f input1.tsv -k 3-2 -d 3-2 -e input2.tsv]====
f1	f2	f3	f4	f5
27	xa	gg	44	45
28	xb	gh	45	46
29	xc	gi	46	47
30	xd	gj	47	48
32	xe	gk	48	49

====[tsv-join --header -f input1.tsv -k 2,3 -a 4 input2.tsv]====
f1	f2	f3	f4	f5	f4
1	ggg	UUU	101b	15b	101
2	bbb	ZZZ	21	28	21
3	nnn	GGG	336b	3b	336
4	vvv	VVV	43b	403b	43
5	ggg	CCC	5734b	52b	5734
6	ddd	ZZZ	65b	602b	65
7	ßßß	SSS	7b	771b	 7
8	vv	v	85b	832b	85
9	v	vv	97	91	97
10	GGG	nnn	101	102	101
11	v12	PPP	1123b	1167b	1123
12	àbc	P	1209b	1234b	1209
13	ÀSSC		1367b	1331b	1367
14	-1	1	1489b	1421b	1489
15		B	1522b	1567b	1522
16			1634b	1602b	1634
17	0	X	1721b	1703	1721
18	a g  ß	Y	1845b	1801b	1845
19	%tg-0	Z	1931b	1956b	1931
20	bbb	ZZZ	21	28	21
21	bbb	ZZZ	21	28	21
22	ddd	ZZZ	65b	602b	65
23	v12	PPP	1123b	1167b	1123
24	ÀSSC		1367b	1331b	1367
25	0	X	1721b	1703	1721
26	bbb	ZZZ	21	28	21
31	 	 	sp-sp	2020b	sp-sp

====[tsv-join --header -f input1.tsv -k 2,3 -a 4,5 input2.tsv]====
f1	f2	f3	f4	f5	f4	f5
1	ggg	UUU	101b	15b	101	15
2	bbb	ZZZ	21	28	21	28
3	nnn	GGG	336b	3b	336	 3
4	vvv	VVV	43b	403b	43	403
5	ggg	CCC	5734b	52b	5734	52
6	ddd	ZZZ	65b	602b	65	602
7	ßßß	SSS	7b	771b	 7	771
8	vv	v	85b	832b	85	832
9	v	vv	97	91	97	91
10	GGG	nnn	101	102	101	102
11	v12	PPP	1123b	1167b	1123	1167
12	àbc	P	1209b	1234b	1209	1234
13	ÀSSC		1367b	1331b	1367	1331
14	-1	1	1489b	1421b	1489	1421
15		B	1522b	1567b	1522	1567
16			1634b	1602b	1634	1602
17	0	X	1721b	1703	1721	1703
18	a g  ß	Y	1845b	1801b	1845	1801
19	%tg-0	Z	1931b	1956b	1931	1956
20	bbb	ZZZ	21	28	21	28
21	bbb	ZZZ	21	28	21	28
22	ddd	ZZZ	65b	602b	65	602
23	v12	PPP	1123b	1167b	1123	1167
24	ÀSSC		1367b	1331b	1367	1331
25	0	X	1721b	1703	1721	1703
26	bbb	ZZZ	21	28	21	28
31	 	 	sp-sp	2020b	sp-sp	2020

====[tsv-join --header -f input1.tsv -k 2-3 -a 4-5 input2.tsv]====
f1	f2	f3	f4	f5	f4	f5
1	ggg	UUU	101b	15b	101	15
2	bbb	ZZZ	21	28	21	28
3	nnn	GGG	336b	3b	336	 3
4	vvv	VVV	43b	403b	43	403
5	ggg	CCC	5734b	52b	5734	52
6	ddd	ZZZ	65b	602b	65	602
7	ßßß	SSS	7b	771b	 7	771
8	vv	v	85b	832b	85	832
9	v	vv	97	91	97	91
10	GGG	nnn	101	102	101	102
11	v12	PPP	1123b	1167b	1123	1167
12	àbc	P	1209b	1234b	1209	1234
13	ÀSSC		1367b	1331b	1367	1331
14	-1	1	1489b	1421b	1489	1421
15		B	1522b	1567b	1522	1567
16			1634b	1602b	1634	1602
17	0	X	1721b	1703	1721	1703
18	a g  ß	Y	1845b	1801b	1845	1801
19	%tg-0	Z	1931b	1956b	1931	1956
20	bbb	ZZZ	21	28	21	28
21	bbb	ZZZ	21	28	21	28
22	ddd	ZZZ	65b	602b	65	602
23	v12	PPP	1123b	1167b	1123	1167
24	ÀSSC		1367b	1331b	1367	1331
25	0	X	1721b	1703	1721	1703
26	bbb	ZZZ	21	28	21	28
31	 	 	sp-sp	2020b	sp-sp	2020

====[tsv-join --header -f input1.tsv -k 2,3 -a 4 -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f4
1	ggg	UUU	101b	15b	101
2	bbb	ZZZ	21	28	21
3	nnn	GGG	336b	3b	336
4	vvv	VVV	43b	403b	43
5	ggg	CCC	5734b	52b	5734
6	ddd	ZZZ	65b	602b	65
7	ßßß	SSS	7b	771b	 7
8	vv	v	85b	832b	85
9	v	vv	97	91	97
10	GGG	nnn	101	102	101
11	v12	PPP	1123b	1167b	1123
12	àbc	P	1209b	1234b	1209
13	ÀSSC		1367b	1331b	1367
14	-1	1	1489b	1421b	1489
15		B	1522b	1567b	1522
16			1634b	1602b	1634
17	0	X	1721b	1703	1721
18	a g  ß	Y	1845b	1801b	1845
19	%tg-0	Z	1931b	1956b	1931
20	bbb	ZZZ	21	28	21
21	bbb	ZZZ	21	28	21
22	ddd	ZZZ	65b	602b	65
23	v12	PPP	1123b	1167b	1123
24	ÀSSC		1367b	1331b	1367
25	0	X	1721b	1703	1721
26	bbb	ZZZ	21	28	21
31	 	 	sp-sp	2020b	sp-sp

====[tsv-join --header -f input1.tsv -k 2,3 -a 4,5 -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f4	i1_f5
1	ggg	UUU	101b	15b	101	15
2	bbb	ZZZ	21	28	21	28
3	nnn	GGG	336b	3b	336	 3
4	vvv	VVV	43b	403b	43	403
5	ggg	CCC	5734b	52b	5734	52
6	ddd	ZZZ	65b	602b	65	602
7	ßßß	SSS	7b	771b	 7	771
8	vv	v	85b	832b	85	832
9	v	vv	97	91	97	91
10	GGG	nnn	101	102	101	102
11	v12	PPP	1123b	1167b	1123	1167
12	àbc	P	1209b	1234b	1209	1234
13	ÀSSC		1367b	1331b	1367	1331
14	-1	1	1489b	1421b	1489	1421
15		B	1522b	1567b	1522	1567
16			1634b	1602b	1634	1602
17	0	X	1721b	1703	1721	1703
18	a g  ß	Y	1845b	1801b	1845	1801
19	%tg-0	Z	1931b	1956b	1931	1956
20	bbb	ZZZ	21	28	21	28
21	bbb	ZZZ	21	28	21	28
22	ddd	ZZZ	65b	602b	65	602
23	v12	PPP	1123b	1167b	1123	1167
24	ÀSSC		1367b	1331b	1367	1331
25	0	X	1721b	1703	1721	1703
26	bbb	ZZZ	21	28	21	28
31	 	 	sp-sp	2020b	sp-sp	2020

====Repeated fields tests===

====[tsv-join --header -f input1.tsv -k 2,3,2 -a 4,5,4 -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f4	i1_f5	i1_f4
1	ggg	UUU	101b	15b	101	15	101
2	bbb	ZZZ	21	28	21	28	21
3	nnn	GGG	336b	3b	336	 3	336
4	vvv	VVV	43b	403b	43	403	43
5	ggg	CCC	5734b	52b	5734	52	5734
6	ddd	ZZZ	65b	602b	65	602	65
7	ßßß	SSS	7b	771b	 7	771	 7
8	vv	v	85b	832b	85	832	85
9	v	vv	97	91	97	91	97
10	GGG	nnn	101	102	101	102	101
11	v12	PPP	1123b	1167b	1123	1167	1123
12	àbc	P	1209b	1234b	1209	1234	1209
13	ÀSSC		1367b	1331b	1367	1331	1367
14	-1	1	1489b	1421b	1489	1421	1489
15		B	1522b	1567b	1522	1567	1522
16			1634b	1602b	1634	1602	1634
17	0	X	1721b	1703	1721	1703	1721
18	a g  ß	Y	1845b	1801b	1845	1801	1845
19	%tg-0	Z	1931b	1956b	1931	1956	1931
20	bbb	ZZZ	21	28	21	28	21
21	bbb	ZZZ	21	28	21	28	21
22	ddd	ZZZ	65b	602b	65	602	65
23	v12	PPP	1123b	1167b	1123	1167	1123
24	ÀSSC		1367b	1331b	1367	1331	1367
25	0	X	1721b	1703	1721	1703	1721
26	bbb	ZZZ	21	28	21	28	21
31	 	 	sp-sp	2020b	sp-sp	2020	sp-sp

====[tsv-join --header -f input1.tsv -k 2,3 -d 3,3 -a 5,5,1,5 -p i1_ input2.tsv]====
f1	f2	f3	f4	f5	i1_f5	i1_f5	i1_f1	i1_f5
13	ÀSSC		1367b	1331b	1602	1602	16	1602
16			1634b	1602b	1602	1602	16	1602
24	ÀSSC		1367b	1331b	1602	1602	16	1602
31	 	 	sp-sp	2020b	2020	2020	20	2020

====Write all tests===

====[tsv-join --header -f input1.tsv -k 2,3 -a 5 --write-all MISSING  input2.tsv]====
f1	f2	f3	f4	f5	f5
1	ggg	UUU	101b	15b	15
2	bbb	ZZZ	21	28	28
3	nnn	GGG	336b	3b	 3
4	vvv	VVV	43b	403b	403
5	ggg	CCC	5734b	52b	52
6	ddd	ZZZ	65b	602b	602
7	ßßß	SSS	7b	771b	771
8	vv	v	85b	832b	832
9	v	vv	97	91	91
10	GGG	nnn	101	102	102
11	v12	PPP	1123b	1167b	1167
12	àbc	P	1209b	1234b	1234
13	ÀSSC		1367b	1331b	1331
14	-1	1	1489b	1421b	1421
15		B	1522b	1567b	1567
16			1634b	1602b	1602
17	0	X	1721b	1703	1703
18	a g  ß	Y	1845b	1801b	1801
19	%tg-0	Z	1931b	1956b	1956
20	bbb	ZZZ	21	28	28
21	bbb	ZZZ	21	28	28
22	ddd	ZZZ	65b	602b	602
23	v12	PPP	1123b	1167b	1167
24	ÀSSC		1367b	1331b	1331
25	0	X	1721b	1703	1703
26	bbb	ZZZ	21	28	28
27	xa	gg	44	45	MISSING
28	xb	gh	45	46	MISSING
29	xc	gi	46	47	MISSING
30	xd	gj	47	48	MISSING
31	 	 	sp-sp	2020b	2020
32	xe	gk	48	49	MISSING

====[tsv-join --header -f input1.tsv -k 2,3 -a 5 --write-all ''  input2.tsv]====
f1	f2	f3	f4	f5	f5
1	ggg	UUU	101b	15b	15
2	bbb	ZZZ	21	28	28
3	nnn	GGG	336b	3b	 3
4	vvv	VVV	43b	403b	403
5	ggg	CCC	5734b	52b	52
6	ddd	ZZZ	65b	602b	602
7	ßßß	SSS	7b	771b	771
8	vv	v	85b	832b	832
9	v	vv	97	91	91
10	GGG	nnn	101	102	102
11	v12	PPP	1123b	1167b	1167
12	àbc	P	1209b	1234b	1234
13	ÀSSC		1367b	1331b	1331
14	-1	1	1489b	1421b	1421
15		B	1522b	1567b	1567
16			1634b	1602b	1602
17	0	X	1721b	1703	1703
18	a g  ß	Y	1845b	1801b	1801
19	%tg-0	Z	1931b	1956b	1956
20	bbb	ZZZ	21	28	28
21	bbb	ZZZ	21	28	28
22	ddd	ZZZ	65b	602b	602
23	v12	PPP	1123b	1167b	1167
24	ÀSSC		1367b	1331b	1331
25	0	X	1721b	1703	1703
26	bbb	ZZZ	21	28	28
27	xa	gg	44	45	
28	xb	gh	45	46	
29	xc	gi	46	47	
30	xd	gj	47	48	
31	 	 	sp-sp	2020b	2020
32	xe	gk	48	49	

====[tsv-join --header -f input1.tsv -k 2,3 -a 4,5 --write-all MISSING  input2.tsv]====
f1	f2	f3	f4	f5	f4	f5
1	ggg	UUU	101b	15b	101	15
2	bbb	ZZZ	21	28	21	28
3	nnn	GGG	336b	3b	336	 3
4	vvv	VVV	43b	403b	43	403
5	ggg	CCC	5734b	52b	5734	52
6	ddd	ZZZ	65b	602b	65	602
7	ßßß	SSS	7b	771b	 7	771
8	vv	v	85b	832b	85	832
9	v	vv	97	91	97	91
10	GGG	nnn	101	102	101	102
11	v12	PPP	1123b	1167b	1123	1167
12	àbc	P	1209b	1234b	1209	1234
13	ÀSSC		1367b	1331b	1367	1331
14	-1	1	1489b	1421b	1489	1421
15		B	1522b	1567b	1522	1567
16			1634b	1602b	1634	1602
17	0	X	1721b	1703	1721	1703
18	a g  ß	Y	1845b	1801b	1845	1801
19	%tg-0	Z	1931b	1956b	1931	1956
20	bbb	ZZZ	21	28	21	28
21	bbb	ZZZ	21	28	21	28
22	ddd	ZZZ	65b	602b	65	602
23	v12	PPP	1123b	1167b	1123	1167
24	ÀSSC		1367b	1331b	1367	1331
25	0	X	1721b	1703	1721	1703
26	bbb	ZZZ	21	28	21	28
27	xa	gg	44	45	MISSING	MISSING
28	xb	gh	45	46	MISSING	MISSING
29	xc	gi	46	47	MISSING	MISSING
30	xd	gj	47	48	MISSING	MISSING
31	 	 	sp-sp	2020b	sp-sp	2020
32	xe	gk	48	49	MISSING	MISSING

====Misc other tests===

====[tail -n 10 input1.tsv | tsv-join -f - -k 4 -a 1 input2.tsv]====
31	 	 	sp-sp	2020b	20

====[tail -n 10 input1.tsv | tsv-join -f - -k 4 -d 5 input2.tsv]====

====[tsv-join --header -f input1.tsv -k 4 -d 5 input2.tsv]====
f1	f2	f3	f4	f5

====[tail -n 10 input2.tsv | tsv-join -f input1.tsv -k 4,5 -a 1 -- input2.tsv - input1.tsv]====
f1	f2	f3	f4	f5	f1
2	bbb	ZZZ	21	28	2
9	v	vv	97	91	9
10	GGG	nnn	101	102	10
20	bbb	ZZZ	21	28	2
21	bbb	ZZZ	21	28	2
26	bbb	ZZZ	21	28	2
26	bbb	ZZZ	21	28	2
f1	f2	f3	f4	f5	f1
1	ggg	UUU	101	15	1
2	bbb	ZZZ	21	28	2
3	nnn	GGG	336	 3	3
4	vvv	VVV	43	403	4
5	ggg	CCC	5734	52	5
6	ddd	ZZZ	65	602	6
7	ßßß	SSS	 7	771	7
8	vv	v	85	832	8
9	v	vv	97	91	9
10	GGG	nnn	101	102	10
11	v12	PPP	1123	1167	11
12	àbc	P	1209	1234	12
13	ÀSSC		1367	1331	13
14	-1	1	1489	1421	14
15		B	1522	1567	15
16			1634	1602	16
17	0	X	1721	1703	17
18	a g  ß	Y	1845	1801	18
19	%tg-0	Z	1931	1956	19
20	 	 	sp-sp	2020	20

====Single column input file tests===

====[tsv-join --header -f input_1x5.tsv -k 1 input1.tsv]====
f1	f2	f3	f4	f5
3	nnn	GGG	336	 3

====[tsv-join --header -f input_1x5.tsv -k 1 -d 2 input1.tsv]====
f1	f2	f3	f4	f5
1	ggg	UUU	101	15
5	ggg	CCC	5734	52
9	v	vv	97	91

====[tsv-join --header -f input_1x5.tsv -k 1 -d 2 -a 1 input1.tsv]====
f1	f2	f3	f4	f5	fa
1	ggg	UUU	101	15	ggg
5	ggg	CCC	5734	52	ggg
9	v	vv	97	91	v

====[tsv-join --header -f input1.tsv -k 1 input_1x5.tsv]====
fa
3

====[tsv-join --header -f input1.tsv -k 2 -d 1 input_1x5.tsv]====
fa
ggg
v

====[tsv-join --allow-duplicate-keys --header -f input1.tsv -k 2 -d 1 -a 5,1 -p i1_ input_1x5.tsv]====
fa	i1_f5	i1_f1
ggg	52	5
v	91	9

====Alternate delimiter tests===

====[tsv-join --delimiter : --header -k 1 -f input_2x3_colon.tsv input_5x4_colon.tsv]====
Field A:Field B:Field C:Field D:Field E
13:hello world:fast:432:303
101:501:432:12:13

====[tsv-join --delimiter : --header -k 1 -d 5 -f input_2x3_colon.tsv input_5x4_colon.tsv]====
Field A:Field B:Field C:Field D:Field E
55:	abc:501:892:101
101:501:432:12:13

====[tsv-join --delimiter : --header -k 1,2 -d 5,3 -a 1 -f input_2x3_colon.tsv input_5x4_colon.tsv]====
Field A:Field B:Field C:Field D:Field E:col a
55:	abc:501:892:101:101

====[tsv-join --delimiter : --header -d 1,2 -k 5,3 -a 2 -f input_5x4_colon.tsv input_2x3_colon.tsv]====
col a:col b:Field B
101:501:	abc

====Empty file tests===

====[tsv-join -f input_emptyfile.tsv input2.tsv]====

====[tsv-join -H -f input_emptyfile.tsv input2.tsv]====
f1	f2	f3	f4	f5

====[tsv-join -f input1.tsv input_emptyfile.tsv]====

====[tsv-join -H -f input1.tsv input_emptyfile.tsv]====

Help and Version printing 1
-----------------

====[tsv-join --help | grep -c Synopsis]====
1
====[tsv-join --help-verbose | grep -c Synopsis]====
1
====[tsv-join --version | grep -c 'tsv-join (eBay/tsv-utils)']====
1
====[tsv-join -V | grep -c 'tsv-join (eBay/tsv-utils)']====
1
